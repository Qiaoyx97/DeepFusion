# DeepFusion: a deep bi-modal information fusion network for unraveling protein-RNA interactions using in vivo RNA structures

Welcome to DeepFusion's git repository.

# Installation
DeepFusion is designed for the Linux operating system environment. All code is built on the Python programming language and the Pytorch deep learning framework. Please confirm the following settings progressively: <br>
```
Python 3.6.9  
pip 9.0.1 
Pytorch 1.2.0 
pip3 install sklearn 
pip3 install pandas 
pip3 install tqdm 
```
***
# usage
Documentation for DeepFusion on **RBP-24** and **RBP-120** is available in the **_/RBP-24_** and **_/RBP-120_** folders, respectively. Files related to RNA degradation experiments are in the **_/Degradation_** folder.
## RBP-24
Please refer to the Graphport website for the original **RBP-24** dataset. The training, validation and test sets need to be processed into the standard ['label', '75 nucleotides', '375 nucleotides'] format before use, as shown in **_/RBP-24/sample_**. The results of DeepFusion training on the **RBP-24** dataset can be found at **_/RBP-24/results_** and the saved models at **_/RBP-24/models_**. To reproduce the DeepFusion results on the **RBP-24** dataset please use the file ```/RBP-24/trainer.py``` and modify the followings:

+ **os.environ['CUDA_VISIBLE_DEVICES']**: Specification of the GPU number used for training.
+ **result_path**: The path where the training results are saved.
+ **train_dataset**: The path to the training sets.
+ **valid_dataset**: The path to the validation sets.
+ **test_dataset**: The path to the test sets.
+ **name_list**: The path to all processed RBP-24 data.

For visualization of the features extracted from DeepFusion, please follow the steps below using ```/RBP-24/motif/gen_featuremap.py```. The tomtom file generated by the code can be used for TOMTOM platform plotting.

+ **os.environ['CUDA_VISIBLE_DEVICES']**: Specification of the GPU number.
+ **train_dataset**: The path of the dataset used for visualisation.
+ **rbpnames**: List of RBPs used for visualisation.

## RBP-120
The complete **RBP-120** dataset can be downloaded on the website. DeepFusion conducted three sets of experiments on the **RBP-120** dataset: **sequence-only**, **sequence+vitro** and **sequence+vivo**. The code and results of these experiments are stored in the folders **_/RBP-120/sequence-only_**, **_/RBP-120/sequence+vivo_** and **_/RBP-120/sequence+vivo_**, respectively. Three experiments were conducted using the same process. **_/RBP-120/sequence-only_** is used as an example.

### RBP-120 sequence-only experiment
The sample data used for the experiment is in **_/RBP-120/sequence-only/sample_**. Please use ```GenData.py``` to convert the input format before starting the experiment.<br>
The results of DeepFusion training on the **RBP-120 sequence-only** dataset can be found at **_/RBP-120/sequence-only/results_** and the saved models at **_/RBP-120/sequence-only/models_**. To reproduce the DeepFusion results on the **RBP-120 sequence-only** dataset please use the file ```/RBP-120/sequence-only/Rbp120trainer.py``` and modify the followings:

+ **os.environ['CUDA_VISIBLE_DEVICES']**: Specification of the GPU number used for training.
+ **result_path**: The path where the training results are saved.
+ **name_list**: The path to all processed RBP-120 sequence-only data.


For visualization of the features extracted from DeepFusion, please follow the steps below using ```/RBP-120/motif/gen_featuremap_120.py```. The tomtom file generated by the code can be used for TOMTOM platform plotting.

+ **os.environ['CUDA_VISIBLE_DEVICES']**: Specification of the GPU number.
+ **rbpnames**: List of RBPs used for visualisation.
+ **data_dir**: The path of the dataset used for visualisation.

